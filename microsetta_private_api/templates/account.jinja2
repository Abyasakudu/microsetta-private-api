{% extends "sitebase.jinja2" %}
{% set page_title = "Sources" %}
{% set show_breadcrumbs = True %}
{% block head %}
    <script src="/static/vendor/js/jquery-3.4.1.min.js"></script>
    <script src="/static/vendor/js/jquery.validate.min.js"></script>
    <script>
        $(document).ready(function() {
            // Initialize form validation
            $("form[name='new_source_form']").validate({
                // Specify validation rules
                rules: {
                    // The key name on the left side is the name attribute
                    // of an input field. Validation rules are defined
                    // on the right side

                    // TODO: Nothing here keeps someone from e.g. naming all their sources "Bob", etc
                    source_name: "required",
                    source_type: "required"
                }
            });
        });
    </script>
{% endblock %}
{% block content %}
        <div class="container">
            {%  if sources|length > 0 %}
            Choose a source by clicking on a name:
            <div class="list-group">
                <div class="row">
                    <div class="col-sm">
                        <i>Name</i>
                    </div>
                    <div class="col-sm">
                        <i>Source type</i>
                    </div>
                </div>
                {% for source in sources %}
                <div class="container list-group-item {{loop.cycle('odd', 'even') }}">
                  <div class="row">
                    <div class="col-sm">
                      <a href="/accounts/{{account_id}}/sources/{{ source.source_id|e }}">
                          {{ source.source_name|e}}
                      </a>
                    </div>
                    <div class="col-sm">
                      {{source.source_type|e}}
                    </div>
                  </div>
                </div>
                {% endfor %}
            </div>
            <br/>
            <em>Or, optionally,</em>
            {% endif %}
        </div>
        <div class="container">
            Add a new source to this account:
            <br />
            <a href = "/accounts/{{ account_id }}/create_human_source">
                <button class="btn btn-primary"> New Human Source</button></a>
            <a href = "/accounts/{{ account_id }}/create_nonhuman_source">
                <button class="btn btn-primary"> New Environmental Source</button></a>
        </div>
{% endblock %}
