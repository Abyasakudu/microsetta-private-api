{% extends "sitebase.jinja2" %}
{% set page_title = "Sample Information" %}
{% set show_breadcrumbs = True %}
{% set disable_bootstrap = True %}
{% block head %}
    <!--  Argh, Bootstrap 3 and 4 don't mix.  So the header and footer look slightly different on this page -->
    <!--  The Vue Form Generator date time picker requires bootstrap 3, can't use 4.0  -->
    <link rel="stylesheet" href="/static/vendor/bootstrap-3.3.7-dist/css/bootstrap.css" />
    <script type="text/javascript" src="/static/vendor/js/vue-2.5.17.min.js"></script>
    <script type="text/javascript" src="/static/vendor/vue-form-generator-2.3.4/vfg.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/vendor/vue-form-generator-2.3.4/vfg.css" />

    <!--  The Vue Form Generator date time component requires jquery moment.js, and the bootstrap-datetimepicker component -->
    <script type="text/javascript" src="/static/vendor/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/static/vendor/js/moment-2.9.0-with-locales.js"></script>
    <script type="text/javascript" src="/static/vendor/bootstrap-datetimepicker-4.14.30/bootstrap-datetimepicker.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/vendor/bootstrap-datetimepicker-4.14.30/bootstrap-datetimepicker.css"/>
{% endblock %}
{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="/accounts/{{acct_id}}">Account</a></li>
    <li class="breadcrumb-item"><a href="/accounts/{{acct_id}}/sources/{{source_id}}">Source</a></li>
    <li class="breadcrumb-item active" aria-current="page">Sample Information</li>
{% endblock %}
{% block content %}
    <div class="container">
        <div id="app">
          <div class="panel panel-default">
            <div class="panel-body">
              <form method="post" id="sample_form">
                <vue-form-generator :schema="schema" :model="model" :options="formOptions"></vue-form-generator>
              </form>
            </div>
          </div>
        </div>
    </div>

    <!-- These should really be in the head, but don't easily work there.
    Probably needs a document.load handler or something?  -->
    <script type="text/javascript">
      var survey_model={{sample|tojson}};
      var survey_schema={{schema|tojson}};
      last_group = survey_schema.groups[survey_schema.groups.length-1];
      last_group.fields.push(
      {
        buttonText: "Update",
        type: "submit",
        validateBeforeSubmit: true,
        onSubmit: function(){
          document.getElementById("sample_form").submit();
        }
      });
    </script>
    <script type="text/javascript" src="/static/vue_survey_form.js"></script>
{% endblock %}
